import{c as u,u as Pe,a as Ie,r as n,j as e,d as W,X as R,e as Ve,B as He,P as B,T as G,L as Ue,f as je,g as We,G as Be,s as c,M as Ge,F as Ye,I as Xe,h as Ze}from"./index-D8JVYbYx.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ke=u("calendar",Je);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],es=u("chart-column",Qe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ts=u("check",ss);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],rs=u("dollar-sign",as);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ns=u("download",ls);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cs=u("eye",os);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ds=u("layout-dashboard",is);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],hs=u("log-out",xs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],gs=u("pen-line",ms);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ps=u("save",us);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ne=u("settings",bs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ve=u("shopping-cart",ys);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],we=u("ticket",fs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Ns=u("trending-down",js);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ws=u("trending-up",vs),D=({active:N,onClick:E,icon:C,label:m,badge:o})=>e.jsxs("button",{onClick:E,className:`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all mb-1 ${N?"bg-primary text-white shadow-lg shadow-primary/30 font-bold":"text-gray-500 hover:bg-gray-50 hover:text-charcoal font-medium"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:`w-5 h-5 ${N?"text-white":"text-gray-400 group-hover:text-charcoal"}`}),e.jsx("span",{className:"text-sm",children:m})]}),o?e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full ${N?"bg-white/20 text-white":"bg-red-100 text-red-500"}`,children:o}):null]}),le=({title:N,value:E,subValue:C,trend:m,trendValue:o,icon:_,colorClass:z})=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow relative overflow-hidden group",children:[e.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl ${z} opacity-5 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110`}),e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("div",{className:`p-3 rounded-xl ${z.replace("from-","bg-").split(" ")[0]} bg-opacity-10 text-charcoal`,children:e.jsx(_,{className:"w-6 h-6"})}),m&&e.jsxs("div",{className:`flex items-center gap-1 text-xs font-bold px-2 py-1 rounded-full ${m==="up"?"bg-green-50 text-green-600":m==="down"?"bg-red-50 text-red-600":"bg-gray-50 text-gray-600"}`,children:[m==="up"?e.jsx(ws,{className:"w-3 h-3"}):e.jsx(Ns,{className:"w-3 h-3"}),e.jsx("span",{children:o})]})]}),e.jsx("h3",{className:"text-gray-400 font-bold text-xs uppercase tracking-wider mb-1",children:N}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-2xl font-black text-charcoal",children:E}),C&&e.jsx("span",{className:"text-xs font-bold text-gray-400",children:C})]})]});function ks(){var ue,pe;const N=Pe(),{updateMarqueeText:E,toggleMarquee:C,addToast:m}=Ie(),[o,_]=n.useState("overview"),[z,w]=n.useState(!1),[_e,ne]=n.useState(!0),[y,v]=n.useState(!1),[ke,T]=n.useState(""),[f,P]=n.useState({marqueeTextAr:"",marqueeTextEn:"",marqueeEnabled:!0}),[S,Y]=n.useState({start:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[Ce,X]=n.useState("30days"),[Z,oe]=n.useState([]),[J,ce]=n.useState([]),[I,ie]=n.useState([]),[K,de]=n.useState([]),[Se,V]=n.useState(!1),[qe,Q]=n.useState(!1),[Me,ee]=n.useState(!1),[O,xe]=n.useState(null),[p,se]=n.useState({isOpen:!1,type:null,id:null,name:""}),[he,H]=n.useState(null),[r,x]=n.useState({name_ar:"",name_en:"",description_ar:"",description_en:"",price:"",old_price:"",category:"",needs_upload:!1,free_shipping:!1,is_best_seller:!1,is_new:!0,is_out_of_stock:!1,sizes:[],images:[]}),me=n.useRef(null),[b,F]=n.useState({size:"",price:0,width:0,height:0}),[d,q]=n.useState({code:"",discount_percent:10,usage_limit:100,is_active:!0,usage_count:0,targetType:"all",target_product_ids:[]}),[k,te]=n.useState({name_ar:"",name_en:""}),[L,ae]=n.useState([]);n.useEffect(()=>{(async()=>{const{data:{user:t}}=await c.auth.getUser();t?U():N("/admin/login")})()},[N]);const U=async()=>{var s,t;ne(!0);try{const[a,l,h,g,i,$,A]=await Promise.all([c.from("orders").select("*").order("created_at",{ascending:!1}),c.from("products").select("*").order("created_at",{ascending:!1}),c.from("categories").select("*").order("name_ar",{ascending:!0}),c.from("coupons").select("*").order("created_at",{ascending:!1}),c.from("store_settings").select("value").eq("key","marquee_text_ar").single(),c.from("store_settings").select("value").eq("key","marquee_text_en").single(),c.from("store_settings").select("value").eq("key","marquee_enabled").single()]);oe(a.data||[]),ce(l.data||[]),ie(h.data||[]),de(g.data||[]);const be=((s=i.data)==null?void 0:s.value)||"",ye=((t=$.data)==null?void 0:t.value)||"",fe=A.data?A.data.value==="true":!0;P({marqueeTextAr:be,marqueeTextEn:ye,marqueeEnabled:fe}),E(be,ye),C(fe)}catch(a){console.error("Fetch error:",a)}finally{ne(!1)}},$e=s=>{X(s);const t=new Date;let a=new Date;switch(s){case"today":a=new Date;break;case"yesterday":a.setDate(t.getDate()-1),t.setDate(t.getDate()-1);break;case"7days":a.setDate(t.getDate()-7);break;case"30days":a.setDate(t.getDate()-30);break;case"5months":a.setMonth(t.getMonth()-5);break;case"1year":a.setFullYear(t.getFullYear()-1);break;case"all":a=new Date("2023-01-01");break;default:return}Y({start:a.toISOString().split("T")[0],end:t.toISOString().split("T")[0]})},M=n.useMemo(()=>{const s=new Date(S.start);s.setHours(0,0,0,0);const t=new Date(S.end);return t.setHours(23,59,59,999),Z.filter(a=>{const l=new Date(a.created_at);return l>=s&&l<=t})},[Z,S]),j=n.useMemo(()=>{const s=M.reduce((i,$)=>i+$.total_price,0),t=M.length,a=t>0?s/t:0,l=K.filter(i=>i.is_active).length,h=K.reduce((i,$)=>i+($.usage_count||0),0),g=M.filter(i=>i.total_price<i.items.reduce(($,A)=>$+A.price*A.quantity,0)).length;return{totalSales:s,totalOrders:t,avgOrderValue:a,activeCoupons:l,totalCouponUsage:h,ordersWithCoupons:g}},[M,K]),re=(s,t,a)=>{se({isOpen:!0,type:s,id:t,name:a}),H(null)},Ee=async()=>{if(!(!p.id||!p.type)){v(!0),H(null);try{let s=null;switch(p.type){case"product":const{error:t}=await c.from("products").delete().eq("id",p.id);s=t,s||ce(g=>g.filter(i=>i.id!==p.id));break;case"category":const{error:a}=await c.from("categories").delete().eq("id",p.id);s=a,s||ie(g=>g.filter(i=>i.id!==p.id));break;case"coupon":const{error:l}=await c.from("coupons").delete().eq("id",p.id);s=l,s||de(g=>g.filter(i=>i.id!==p.id));break;case"order":const{error:h}=await c.from("orders").delete().eq("id",p.id);s=h,s||oe(g=>g.filter(i=>i.id!==p.id));break}if(s)throw s;se({isOpen:!1,type:null,id:null,name:""}),m("تم الحذف بنجاح ✅","success")}catch(s){console.error(s),s.code==="23503"?H("لا يمكن حذف هذا العنصر لأنه مرتبط ببيانات أخرى."):H(s.message||"حدث خطأ غير متوقع.")}finally{v(!1)}}},De=async s=>{if(s.preventDefault(),!(!k.name_ar.trim()||!k.name_en.trim())){v(!0);try{const t=`cat-${Date.now()}`,{error:a}=await c.from("categories").insert([{name_ar:k.name_ar,name_en:k.name_en,slug:t}]);if(a)throw a;te({name_ar:"",name_en:""}),ee(!1),await U(),m("تم إضافة القسم بنجاح","success")}catch(t){console.error(t),m("Error: "+t.message,"error")}finally{v(!1)}}},ze=async s=>{s.preventDefault(),v(!0);try{const{error:t}=await c.from("store_settings").upsert({key:"marquee_text_ar",value:f.marqueeTextAr},{onConflict:"key"});if(t)throw t;const{error:a}=await c.from("store_settings").upsert({key:"marquee_text_en",value:f.marqueeTextEn},{onConflict:"key"});if(a)throw a;const{error:l}=await c.from("store_settings").upsert({key:"marquee_enabled",value:String(f.marqueeEnabled)},{onConflict:"key"});if(l)throw l;E(f.marqueeTextAr,f.marqueeTextEn),C(f.marqueeEnabled),m("تم تحديث الإعدادات بنجاح ✅","success")}catch(t){m("Error: "+t.message,"error")}finally{v(!1)}},Te=async s=>{s.preventDefault();const{data:{session:t}}=await c.auth.getSession();if(!t){alert("❌ أنت غير مسجل دخول");return}v(!0),T("جاري التحقق...");try{let a=[...r.images||[]];if(L.length>0)for(let h=0;h<L.length;h++){const g=L[h];T(`جاري رفع الصورة ${h+1} من ${L.length}...`);const i=await Ze(g,"products");a.push(i)}T("جاري حفظ البيانات...");const l={...r,price:Number(r.price)||0,old_price:Number(r.old_price)||0,images:a};delete l.id,O!=null&&O.id?await c.from("products").update(l).eq("id",O.id):await c.from("products").insert([l]),alert("✅ تم حفظ المنتج بنجاح"),V(!1),U()}catch(a){console.error("PROCESS ERROR:",a),alert(`❌ حدث خطأ: ${a.message}`)}finally{v(!1),T("")}},Oe=async s=>{var t;s.preventDefault(),v(!0);try{const a=d.targetType==="specific"?d.target_product_ids:null,l=(t=d.code)==null?void 0:t.trim().toUpperCase();if(!l)throw new Error("يرجى إدخال كود الخصم");if(d.targetType==="specific"&&(!a||a.length===0))throw new Error("يرجى اختيار منتج واحد على الأقل");await c.from("coupons").insert([{code:l,discount_percent:d.discount_percent,usage_limit:d.usage_limit,is_active:!0,usage_count:0,target_product_ids:a}]),Q(!1),U(),q({code:"",discount_percent:10,usage_limit:100,is_active:!0,usage_count:0,targetType:"all",target_product_ids:[]}),m("تم إضافة الكوبون بنجاح ✅","success")}catch(a){m(a.message,"error")}finally{v(!1)}},ge=(s=null)=>{s?(xe(s),x({...s,price:s.price,old_price:s.old_price??"",sizes:s.sizes||[]})):(xe(null),x({name_ar:"",name_en:"",description_ar:"",description_en:"",price:"",old_price:"",category:"",needs_upload:!1,free_shipping:!1,is_best_seller:!1,is_new:!0,is_out_of_stock:!1,sizes:[],images:[]})),F({size:"",price:0,width:0,height:0}),ae([]),T(""),V(!0)},Fe=()=>{if(b.price&&b.width&&b.height){const s=`${b.width}x${b.height}`;x(t=>({...t,sizes:[...t.sizes||[],{size:s,price:Number(b.price),width:Number(b.width),height:Number(b.height)}]})),F({size:"",price:0,width:0,height:0})}else m("يرجى إدخال الطول والعرض والسعر","error")},Le=s=>x(t=>{var a;return{...t,sizes:(a=t.sizes)==null?void 0:a.filter((l,h)=>h!==s)}}),Ae=s=>{if(s.target.files&&s.target.files.length>0){const t=Array.from(s.target.files),a=t.filter(l=>l.size<=10*1024*1024);a.length<t.length&&m("بعض الملفات تجاوزت الحجم المسموح (10MB)","error"),ae(l=>[...l,...a])}s.target&&(s.target.value="")},Re=s=>{q(t=>{const a=t.target_product_ids||[];return a.includes(s)?{...t,target_product_ids:a.filter(l=>l!==s)}:{...t,target_product_ids:[...a,s]}})};return _e?e.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-gray-50",children:[e.jsx(W,{className:"w-10 h-10 text-primary animate-spin mb-4"}),e.jsx("span",{className:"text-gray-400 font-bold text-xs uppercase tracking-widest",children:"Loading Dashboard..."})]}):e.jsxs("div",{className:"flex h-screen bg-[#F8F9FA] font-sans overflow-hidden",dir:"rtl",children:[z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden backdrop-blur-sm",onClick:()=>w(!1)}),Se&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-black text-charcoal",children:O?"تعديل المنتج":"إضافة منتج جديد"}),e.jsx("button",{onClick:()=>V(!1),className:"text-gray-400 hover:text-red-500",children:e.jsx(R,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"اسم المنتج (بالعربية)"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary",value:r.name_ar,onChange:s=>x({...r,name_ar:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Product Name (English)"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary",dir:"ltr",value:r.name_en,onChange:s=>x({...r,name_en:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"وصف المنتج (بالعربية)"}),e.jsx("textarea",{required:!0,className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary h-24",value:r.description_ar,onChange:s=>x({...r,description_ar:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Product Description (English)"}),e.jsx("textarea",{required:!0,className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary h-24",dir:"ltr",value:r.description_en,onChange:s=>x({...r,description_en:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"السعر (د.أ)"}),e.jsx("input",{required:!0,type:"number",step:"0.1",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary",value:r.price,onChange:s=>x({...r,price:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"السعر القديم (اختياري)"}),e.jsx("input",{type:"number",step:"0.1",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary",value:r.old_price,onChange:s=>x({...r,old_price:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"القسم"}),e.jsxs("select",{required:!0,className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary",value:r.category,onChange:s=>x({...r,category:s.target.value}),children:[e.jsx("option",{value:"",children:"اختر القسم..."}),I.map(s=>e.jsx("option",{value:s.slug,children:s.name_ar},s.id))]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"حالة المنتج"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${r.is_new?"bg-blue-50 border-blue-200":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-2 rounded-full ${r.is_new?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-charcoal",children:"منتج جديد (New)"}),e.jsx("span",{className:"text-[10px] text-gray-400",children:'إظهار شارة "جديد" على المنتج'})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:r.is_new,onChange:s=>x({...r,is_new:s.target.checked})}),e.jsx("div",{className:`w-10 h-6 rounded-full transition-colors duration-200 ${r.is_new?"bg-blue-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform duration-200 shadow-sm ${r.is_new?"translate-x-4":"translate-x-0"}`})})]})]}),e.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${r.is_out_of_stock?"bg-red-50 border-red-200":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-2 rounded-full ${r.is_out_of_stock?"bg-red-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(He,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-charcoal",children:"نفذت الكمية (Out of Stock)"}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"إظهار شارة ومنع الطلب"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:r.is_out_of_stock,onChange:s=>x({...r,is_out_of_stock:s.target.checked})}),e.jsx("div",{className:`w-10 h-6 rounded-full transition-colors duration-200 ${r.is_out_of_stock?"bg-red-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform duration-200 shadow-sm ${r.is_out_of_stock?"translate-x-4":"translate-x-0"}`})})]})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-3 rounded-lg border border-gray-200 hover:border-primary/50 transition-colors",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-primary",checked:r.free_shipping,onChange:s=>x({...r,free_shipping:s.target.checked})}),e.jsx("span",{className:"text-sm font-bold text-charcoal",children:"شحن مجاني"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-3 rounded-lg border border-gray-200 hover:border-primary/50 transition-colors",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-primary",checked:r.needs_upload,onChange:s=>x({...r,needs_upload:s.target.checked})}),e.jsx("span",{className:"text-sm font-bold text-charcoal",children:"يتطلب رفع صور"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-3 rounded-lg border border-gray-200 hover:border-primary/50 transition-colors",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-primary",checked:r.is_best_seller,onChange:s=>x({...r,is_best_seller:s.target.checked})}),e.jsx("span",{className:"text-sm font-bold text-charcoal",children:"الأكثر مبيعاً"})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[e.jsx("label",{className:"block text-sm font-bold text-charcoal mb-2",children:"صور المنتج"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[(ue=r.images)==null?void 0:ue.map((s,t)=>e.jsxs("div",{className:"relative w-20 h-20 rounded-lg overflow-hidden border border-gray-200 group",children:[e.jsx("img",{src:s,className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>x(a=>{var l;return{...a,images:(l=a.images)==null?void 0:l.filter((h,g)=>g!==t)}}),className:"absolute inset-0 bg-black/50 text-white flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsx(R,{className:"w-4 h-4"})})]},t)),L.map((s,t)=>e.jsxs("div",{className:"relative w-20 h-20 rounded-lg overflow-hidden border border-gray-200 flex items-center justify-center bg-gray-100 group",children:[e.jsx("img",{src:URL.createObjectURL(s),className:"w-full h-full object-cover",alt:"preview"}),e.jsx("button",{type:"button",onClick:()=>ae(a=>a.filter((l,h)=>h!==t)),className:"absolute inset-0 bg-black/50 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(R,{className:"w-4 h-4"})})]},`new-${t}`)),e.jsxs("div",{onClick:()=>{var s;return(s=me.current)==null?void 0:s.click()},className:"w-20 h-20 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors relative hover:shadow-inner bg-white active:scale-95",children:[e.jsx(B,{className:"w-6 h-6 text-gray-400"}),e.jsx("input",{ref:me,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:Ae})]})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[e.jsx("label",{className:"block text-sm font-bold text-charcoal mb-2",children:"الأحجام والمقاسات (اختياري)"}),e.jsxs("div",{className:"flex gap-2 mb-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400",children:"العرض (سم)"}),e.jsx("input",{type:"number",className:"w-20 p-2 bg-gray-50 border border-gray-200 rounded-lg text-sm",value:b.width||"",onChange:s=>F({...b,width:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400",children:"الطول (سم)"}),e.jsx("input",{type:"number",className:"w-20 p-2 bg-gray-50 border border-gray-200 rounded-lg text-sm",value:b.height||"",onChange:s=>F({...b,height:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400",children:"السعر (د.أ)"}),e.jsx("input",{type:"number",className:"w-20 p-2 bg-gray-50 border border-gray-200 rounded-lg text-sm",value:b.price||"",onChange:s=>F({...b,price:Number(s.target.value)})})]}),e.jsx("button",{type:"button",onClick:Fe,className:"px-4 py-2 bg-charcoal text-white rounded-lg text-sm font-bold hover:bg-black",children:"إضافة"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(pe=r.sizes)==null?void 0:pe.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full text-xs font-bold text-charcoal",children:[s.size," - ",s.price," د.أ",e.jsx("button",{type:"button",onClick:()=>Le(t),className:"text-red-500 hover:text-red-700",children:e.jsx(R,{className:"w-3 h-3"})})]},t))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:()=>V(!1),className:"px-6 py-2 rounded-xl text-gray-500 hover:bg-gray-100 font-bold",children:"إلغاء"}),e.jsxs("button",{type:"submit",disabled:y,className:"px-6 py-2 bg-primary text-white rounded-xl font-bold hover:bg-secondary transition-colors flex items-center gap-2",children:[y&&e.jsx(W,{className:"w-4 h-4 animate-spin"}),y?ke||"جاري الحفظ...":"حفظ المنتج"]})]})]})]})}),Me&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-xl font-black text-charcoal mb-4",children:"إضافة قسم جديد"}),e.jsxs("form",{onSubmit:De,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"اسم القسم (بالعربية)"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary",value:k.name_ar,onChange:s=>te({...k,name_ar:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Category Name (English)"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary",dir:"ltr",value:k.name_en,onChange:s=>te({...k,name_en:s.target.value})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>ee(!1),className:"px-6 py-2 rounded-xl text-gray-500 hover:bg-gray-100 font-bold",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:y,className:"px-6 py-2 bg-primary text-white rounded-xl font-bold hover:bg-secondary transition-colors",children:y?"جاري الحفظ...":"حفظ"})]})]})]})}),qe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 max-h-[80vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-black text-charcoal mb-4",children:"إضافة كوبون خصم"}),e.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"كود الخصم"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary uppercase font-bold tracking-wider",value:d.code,onChange:s=>q({...d,code:s.target.value}),placeholder:"SALE2024"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"نسبة الخصم (%)"}),e.jsx("input",{required:!0,type:"number",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary",value:d.discount_percent,onChange:s=>q({...d,discount_percent:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"حد الاستخدام"}),e.jsx("input",{required:!0,type:"number",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 outline-none focus:border-primary",value:d.usage_limit,onChange:s=>q({...d,usage_limit:Number(s.target.value)})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2",children:"تطبيق الخصم على:"}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"targetType",checked:d.targetType==="all",onChange:()=>q({...d,targetType:"all",target_product_ids:[]})}),e.jsx("span",{className:"text-sm",children:"جميع المنتجات"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"targetType",checked:d.targetType==="specific",onChange:()=>q({...d,targetType:"specific"})}),e.jsx("span",{className:"text-sm",children:"منتجات محددة"})]})]}),d.targetType==="specific"&&e.jsx("div",{className:"border border-gray-200 rounded-xl p-2 h-40 overflow-y-auto custom-scrollbar",children:J.map(s=>{var t;return e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(t=d.target_product_ids)==null?void 0:t.includes(s.id),onChange:()=>Re(s.id)}),e.jsx("span",{className:"text-sm truncate",children:s.name_ar})]},s.id)})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>Q(!1),className:"px-6 py-2 rounded-xl text-gray-500 hover:bg-gray-100 font-bold",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:y,className:"px-6 py-2 bg-primary text-white rounded-xl font-bold hover:bg-secondary transition-colors",children:y?"جاري الحفظ...":"حفظ الكوبون"})]})]})]})}),p.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(G,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-xl font-black text-charcoal mb-2",children:"هل أنت متأكد؟"}),e.jsxs("p",{className:"text-gray-500 text-sm mb-6",children:['سيتم حذف "',p.name,'" نهائياً. لا يمكن التراجع عن هذا الإجراء.']}),he&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-xs font-bold mb-4",children:he}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{onClick:()=>se({...p,isOpen:!1}),className:"px-6 py-2 rounded-xl text-gray-500 hover:bg-gray-100 font-bold",children:"إلغاء"}),e.jsx("button",{onClick:Ee,disabled:y,className:"px-6 py-2 bg-red-500 text-white rounded-xl font-bold hover:bg-red-600 transition-colors",children:y?e.jsx(W,{className:"w-4 h-4 animate-spin"}):"نعم، حذف"})]})]})}),e.jsxs("aside",{className:`fixed lg:static inset-y-0 right-0 w-[280px] bg-white text-gray-600 flex flex-col z-50 transition-transform duration-300 transform ${z?"translate-x-0":"translate-x-full lg:translate-x-0"} shadow-2xl lg:shadow-none border-l border-gray-100`,children:[e.jsxs("div",{className:"h-24 flex items-center justify-center border-b border-gray-100",children:[e.jsx("div",{className:"scale-90",children:e.jsx(Ue,{})}),e.jsx("button",{onClick:()=>w(!1),className:"absolute left-4 lg:hidden text-gray-400 hover:text-red-500",children:e.jsx(R,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(D,{active:o==="overview",onClick:()=>{_("overview"),w(!1)},icon:ds,label:"ملخص الأداء"}),e.jsx("p",{className:"px-4 py-2 text-[10px] font-bold text-gray-400 uppercase tracking-widest mt-4",children:"Store Management"}),e.jsx(D,{active:o==="orders",onClick:()=>{_("orders"),w(!1)},icon:ve,label:"الطلبات",badge:Z.filter(s=>s.status==="قيد الانتظار").length}),e.jsx(D,{active:o==="products",onClick:()=>{_("products"),w(!1)},icon:je,label:"المنتجات"}),e.jsx(D,{active:o==="categories",onClick:()=>{_("categories"),w(!1)},icon:We,label:"أقسام المتجر"}),e.jsx(D,{active:o==="coupons",onClick:()=>{_("coupons"),w(!1)},icon:we,label:"كوبونات الخصم"}),e.jsx("p",{className:"px-4 py-2 text-[10px] font-bold text-gray-400 uppercase tracking-widest mt-4",children:"System"}),e.jsx(D,{active:o==="settings",onClick:()=>{_("settings"),w(!1)},icon:Ne,label:"الإعدادات"})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-100 space-y-2",children:[e.jsxs("button",{onClick:()=>N("/"),className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-gray-500 hover:text-primary hover:bg-primary/5 rounded-xl transition-all",children:[e.jsx(Be,{className:"w-4 h-4"})," العودة للمتجر"]}),e.jsxs("button",{onClick:()=>c.auth.signOut().then(()=>N("/")),className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-red-500 hover:bg-red-50 rounded-xl transition-all",children:[e.jsx(hs,{className:"w-4 h-4"})," تسجيل الخروج"]})]})]}),e.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-[#F8F9FA]",children:[e.jsxs("header",{className:"h-16 lg:h-20 bg-white border-b border-gray-200 px-4 lg:px-8 flex justify-between items-center sticky top-0 z-30",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>w(!0),className:"lg:hidden p-2 -mr-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(Ge,{className:"w-6 h-6"})}),e.jsxs("h2",{className:"text-xl lg:text-2xl font-black text-gray-800 hidden sm:block",children:[o==="overview"&&"الملخص التنفيذي للأداء",o==="products"&&"المخزون والمنتجات",o==="orders"&&"الطلبات الواردة",o==="categories"&&"إدارة الأقسام",o==="coupons"&&"الخصومات",o==="settings"&&"إعدادات المتجر"]})]}),e.jsxs("div",{className:"flex gap-3",children:[o==="products"&&e.jsxs("button",{onClick:()=>ge(),className:"bg-primary hover:bg-secondary text-white px-4 lg:px-6 py-2.5 rounded-xl font-bold text-sm lg:text-base flex items-center gap-2 shadow-lg shadow-primary/20 active:scale-95 transition-all",children:[e.jsx(B,{className:"w-5 h-5"})," ",e.jsx("span",{className:"hidden sm:inline",children:"إضافة منتج"})]}),o==="categories"&&e.jsxs("button",{onClick:()=>ee(!0),className:"bg-primary hover:bg-secondary text-white px-4 lg:px-6 py-2.5 rounded-xl font-bold text-sm lg:text-base flex items-center gap-2 shadow-lg shadow-primary/20 active:scale-95 transition-all",children:[e.jsx(B,{className:"w-5 h-5"})," ",e.jsx("span",{className:"hidden sm:inline",children:"إضافة قسم"})]}),o==="coupons"&&e.jsxs("button",{onClick:()=>Q(!0),className:"bg-primary hover:bg-secondary text-white px-4 lg:px-6 py-2.5 rounded-xl font-bold text-sm lg:text-base flex items-center gap-2 shadow-lg shadow-primary/20 active:scale-95 transition-all",children:[e.jsx(B,{className:"w-5 h-5"})," ",e.jsx("span",{className:"hidden sm:inline",children:"إضافة كوبون"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 lg:p-8 custom-scrollbar",children:[o==="overview"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 scrollbar-hide",children:[e.jsx(Ye,{className:"w-5 h-5 text-gray-400 shrink-0"}),[{id:"today",label:"اليوم"},{id:"yesterday",label:"أمس"},{id:"7days",label:"أسبوع"},{id:"30days",label:"شهر"},{id:"5months",label:"5 أشهر"},{id:"1year",label:"سنة"},{id:"all",label:"الكل"}].map(s=>e.jsx("button",{onClick:()=>$e(s.id),className:`px-4 py-2 rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${Ce===s.id?"bg-charcoal text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:s.label},s.id))]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto bg-gray-50 p-2 rounded-xl",children:[e.jsx(Ke,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:S.start,onChange:s=>{Y({...S,start:s.target.value}),X("custom")},className:"bg-white border-none text-xs font-bold rounded-md px-2 py-1 outline-none text-charcoal"}),e.jsx("span",{className:"text-gray-400 text-xs font-bold",children:"إلى"}),e.jsx("input",{type:"date",value:S.end,onChange:s=>{Y({...S,end:s.target.value}),X("custom")},className:"bg-white border-none text-xs font-bold rounded-md px-2 py-1 outline-none text-charcoal"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:[e.jsx(le,{title:"إجمالي المبيعات (الفترة المحددة)",value:`${j.totalSales.toLocaleString()} د.أ`,subValue:`من ${M.length} طلب`,icon:rs,colorClass:"bg-gradient-to-tr from-green-500 to-green-300",trend:"up",trendValue:"+12%"}),e.jsx(le,{title:"متوسط قيمة السلة",value:`${j.avgOrderValue.toFixed(1)} د.أ`,icon:es,colorClass:"bg-gradient-to-tr from-purple-500 to-purple-300",trend:"neutral",trendValue:"0%"}),e.jsx(le,{title:"المنتجات النشطة",value:J.length,subValue:"منتج في المخزون",icon:je,colorClass:"bg-gradient-to-tr from-orange-500 to-orange-300"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-black text-charcoal text-lg",children:"تحليل المبيعات والطلبات"}),e.jsx("button",{className:"text-gray-400 hover:text-primary",children:e.jsx(ns,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"h-48 flex items-end justify-between gap-2 px-2",children:[40,65,30,80,55,90,45,70,35,60,20,75].map((s,t)=>e.jsxs("div",{className:"w-full bg-gray-50 rounded-t-lg relative group overflow-hidden",children:[e.jsx("div",{style:{height:`${s}%`},className:"absolute bottom-0 w-full bg-brand-gradient opacity-80 group-hover:opacity-100 transition-all rounded-t-lg"}),e.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-charcoal text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[s,"%"]})]},t))}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs font-bold text-gray-400 px-1",children:[e.jsx("span",{children:"يناير"}),e.jsx("span",{children:"فبراير"}),e.jsx("span",{children:"مارس"}),e.jsx("span",{children:"أبريل"}),e.jsx("span",{children:"مايو"}),e.jsx("span",{children:"يونيو"}),e.jsx("span",{children:"يوليو"}),e.jsx("span",{children:"أغسطس"}),e.jsx("span",{children:"سبتمبر"}),e.jsx("span",{children:"أكتوبر"}),e.jsx("span",{children:"نوفمبر"}),e.jsx("span",{children:"ديسمبر"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-secondary/10 rounded-xl text-secondary",children:e.jsx(we,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-charcoal",children:"أداء الكوبونات"}),e.jsx("p",{className:"text-xs text-gray-400 font-bold",children:"ملخص استخدام الخصومات"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-4",children:[e.jsx("span",{className:"text-sm font-bold text-gray-600",children:"الكوبونات النشطة حالياً"}),e.jsx("span",{className:"text-xl font-black text-primary",children:j.activeCoupons})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-4",children:[e.jsx("span",{className:"text-sm font-bold text-gray-600",children:"إجمالي مرات الاستخدام"}),e.jsx("span",{className:"text-xl font-black text-charcoal",children:j.totalCouponUsage})]}),e.jsxs("div",{className:"flex justify-between items-center pb-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-600",children:"طلبات استخدمت كوبون"}),e.jsx("span",{className:"text-xl font-black text-green-600",children:j.ordersWithCoupons})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold mb-2",children:[e.jsx("span",{children:"معدل الاستخدام"}),e.jsxs("span",{children:[j.totalOrders>0?Math.round(j.ordersWithCoupons/j.totalOrders*100):0,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-secondary",style:{width:`${j.totalOrders>0?j.ordersWithCoupons/j.totalOrders*100:0}%`}})})]})]})]})]})]}),o==="products"&&e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-500 text-[10px] font-bold uppercase tracking-wider border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"المنتج"}),e.jsx("th",{className:"px-6 py-4",children:"القسم"}),e.jsx("th",{className:"px-6 py-4",children:"السعر"}),e.jsx("th",{className:"px-6 py-4",children:"الحالة"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"إجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:J.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 overflow-hidden border border-gray-200 shrink-0 relative",children:s.images&&s.images[0]?e.jsx("img",{src:s.images[0],className:"w-full h-full object-cover",loading:"lazy",onError:a=>{a.target.src="https://via.placeholder.com/100?text=No+Image"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 text-gray-300",children:e.jsx(Xe,{className:"w-5 h-5"})})}),e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-gray-800 text-sm line-clamp-1",children:s.name_ar})})]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("span",{className:"text-[10px] font-bold bg-gray-100 text-gray-600 px-2 py-1 rounded-md",children:((t=I.find(a=>a.slug===s.category))==null?void 0:t.name_ar)||s.category})}),e.jsxs("td",{className:"px-6 py-3 font-black text-gray-800 text-sm",children:[s.price," د.أ"]}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("div",{className:"flex gap-1",children:s.is_out_of_stock?e.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-2 py-0.5 rounded-full font-bold",children:"نفذت الكمية"}):e.jsxs(e.Fragment,{children:[s.is_new&&e.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full font-bold",children:"جديد"}),s.is_best_seller&&e.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-600 px-2 py-0.5 rounded-full font-bold",children:"مميز"})]})})}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>ge(s),className:"p-2 text-gray-400 hover:text-primary hover:bg-primary/5 rounded-lg",children:e.jsx(gs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>re("product",s.id,s.name_ar),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(G,{className:"w-4 h-4"})})]})})]},s.id)})})]})})}),o==="orders"&&e.jsx("div",{className:"space-y-4",children:M.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-200",children:[e.jsx(ve,{className:"w-12 h-12 text-gray-200 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 font-bold",children:"لا توجد طلبات في هذه الفترة"})]}):e.jsx("div",{className:"grid gap-4",children:M.map(s=>e.jsxs("div",{className:`bg-white p-6 rounded-2xl shadow-sm border transition-all ${s.status==="قيد الانتظار"?"border-red-200 bg-red-50/30":"border-gray-200 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 border-b border-gray-100/50 pb-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:"text-lg font-black text-charcoal",children:s.customer_name}),e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-md ${s.status==="قيد الانتظار"?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:s.status})]}),e.jsxs("p",{className:"text-sm text-gray-500 font-bold flex items-center gap-2",children:[e.jsx("span",{children:s.customer_phone}),e.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),e.jsx("span",{children:s.city})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"text-2xl font-black text-primary",children:[s.total_price," د.أ"]}),e.jsx("p",{className:"text-xs text-gray-400 font-bold",children:new Date(s.created_at).toLocaleDateString("ar-EG")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase",children:"المنتجات المطلوبة"}),e.jsx("div",{className:"space-y-2",children:s.items.map((t,a)=>e.jsxs("div",{className:"flex items-start gap-3 bg-white/50 p-2 rounded-lg border border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg overflow-hidden shrink-0",children:e.jsx("img",{src:t.images[0],className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-charcoal",children:t.name_ar}),e.jsxs("div",{className:"flex gap-2 text-xs text-gray-500",children:[t.selectedSize&&e.jsxs("span",{children:["المقاس: ",t.selectedSize]}),e.jsxs("span",{children:["العدد: ",t.quantity]})]}),t.customImages&&t.customImages.length>0&&e.jsxs("div",{className:"mt-2 flex gap-2",children:[t.customImages.map((l,h)=>e.jsxs("a",{href:l,target:"_blank",className:"relative group/img block w-8 h-8 rounded border border-gray-200 overflow-hidden",children:[e.jsx("img",{src:l,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover/img:bg-transparent transition-colors"})]},h)),e.jsx("span",{className:"text-[10px] text-blue-500 font-bold self-center",children:"صور مرفقة"})]})]})]},a))})]}),s.payment_method==="transfer"&&s.payment_proof&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100 flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs font-bold text-blue-800 flex items-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4"})," تم إرفاق إشعار الدفع"]}),e.jsxs("a",{href:s.payment_proof,target:"_blank",rel:"noreferrer",className:"text-xs font-bold bg-white text-blue-600 px-3 py-1.5 rounded-lg shadow-sm hover:bg-blue-600 hover:text-white transition-colors flex items-center gap-2",children:[e.jsx(cs,{className:"w-3 h-3"})," معاينة الإشعار"]})]}),e.jsx("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100/50",children:e.jsx("button",{onClick:()=>re("order",s.id,"الطلب"),className:"text-red-400 hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"حذف الطلب",children:e.jsx(G,{className:"w-4 h-4"})})})]})]},s.id))})}),o==="categories"&&e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-500 text-[10px] font-bold uppercase tracking-wider border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"اسم القسم"}),e.jsx("th",{className:"px-6 py-4",children:"الرابط (Slug)"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"إجراءات"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[I.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50/50",children:[e.jsx("td",{className:"px-6 py-4 font-bold text-gray-800",children:s.name_ar}),e.jsx("td",{className:"px-6 py-4 font-mono text-xs text-gray-500",children:s.slug}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>re("category",s.id,s.name_ar),className:"text-red-400 hover:text-red-600 p-2 rounded-lg hover:bg-red-50",children:e.jsx(G,{className:"w-4 h-4"})})})]},s.id)),I.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-8 text-gray-400 text-sm font-bold",children:"لا توجد أقسام حالياً"})})]})]})})}),o==="settings"&&e.jsx("div",{className:"max-w-2xl",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-black text-charcoal mb-6 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-gray-400"}),"إعدادات المتجر العامة"]}),e.jsxs("form",{onSubmit:ze,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-600",children:"نص الشريط المتحرك (بالعربية)"}),e.jsx("div",{className:"relative",children:e.jsx("textarea",{className:"w-full p-4 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:border-primary font-bold text-charcoal min-h-[80px] text-sm",value:f.marqueeTextAr,onChange:s=>P({...f,marqueeTextAr:s.target.value}),placeholder:"اكتب النص الذي سيظهر في الشريط العلوي (عربي)..."})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-600",children:"Marquee Text (English)"}),e.jsx("div",{className:"relative",children:e.jsx("textarea",{className:"w-full p-4 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:border-primary font-bold text-charcoal min-h-[80px] text-sm",dir:"ltr",value:f.marqueeTextEn,onChange:s=>P({...f,marqueeTextEn:s.target.value}),placeholder:"Marquee text in English..."})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-4 rounded-xl border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-charcoal",children:"إظهار الشريط العلوي"}),e.jsx("p",{className:"text-xs text-gray-400",children:"تفعيل أو تعطيل ظهور الشريط المتحرك الأزرق في أعلى الموقع"})]}),e.jsx("button",{type:"button",onClick:()=>P(s=>({...s,marqueeEnabled:!s.marqueeEnabled})),className:`relative w-14 h-8 rounded-full transition-colors duration-300 ${f.marqueeEnabled?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 left-1 bg-white w-6 h-6 rounded-full transition-transform duration-300 shadow-sm ${f.marqueeEnabled?"translate-x-6":"translate-x-0"}`})})]}),e.jsxs("button",{type:"submit",disabled:y,className:"px-8 py-3 bg-charcoal text-white font-bold rounded-xl hover:bg-black transition-all flex items-center gap-2",children:[y?e.jsx(W,{className:"w-4 h-4 animate-spin"}):e.jsx(ps,{className:"w-4 h-4"}),y?"جاري الحفظ...":"حفظ الإعدادات"]})]})]})})]})]})]})}export{ks as default};
